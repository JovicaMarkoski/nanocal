<Wrapper bind:year="year" bind:month="month">
  <table class="weeks">
    <caption>{{ monthName }} {{ year }}</caption>
    <tr class="header">
      {{#each dayNames as day}}
        <th class="day-name">{{ day }}</th>
      {{/each}}
    </tr>
    {{#each calendarMonth as week}}
    <tr class="week">
      {{#each week as weekDay}}
        <td on:click="selectDay(weekDay)" class="{{dayClass(selectedDay, weekDay, month).join(' ')}}">{{weekDay.dayInMonth}}</td>
      {{/each}}
    </tr>
    {{/each}}
  </table>
</Wrapper>

<script>
  import { calendarMonth } from 'cntdys'
  import { selectDay } from './functions.js'
  import { dayClass, monthName, dayNames } from '../common.js'
  import Wrapper from '../Wrapper.html'

  export default {
    helpers: {
      dayClass
    },

    components: { Wrapper },

    computed: {
      calendarMonth: (year, month, startOfTheWeek) => calendarMonth(year, month, startOfTheWeek),
      monthName: (year, month) => monthName(year, month),
      dayNames: (startOfTheWeek) => dayNames(startOfTheWeek)
    },

    methods: {
      selectDay(day) {
        selectDay(this, day)
      }
    }
  }
</script>
