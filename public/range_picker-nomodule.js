var CDRangePicker=function(){'use strict';function a(){}function b(a){for(var b,c,d=1,e=arguments.length;d<e;d++)for(b in c=arguments[d],c)a[b]=c[b];return a}function c(a,b){b.appendChild(a)}function d(a,b,c){b.insertBefore(a,c)}function e(a){a.parentNode.removeChild(a)}function f(a){for(var b=0;b<a.length;b+=1)a[b]&&a[b].d()}function g(a){return document.createElement(a)}function h(a){return document.createTextNode(a)}function i(a,b,c){a.addEventListener(b,c,!1)}function j(a,b,c){a.removeEventListener(b,c,!1)}function k(a,b,c){a.setAttribute(b,c)}function l(){return Object.create(null)}function m(b){this.destroy=a,this.fire('destroy'),this.set=this.get=a,!1!==b&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function n(c,d){return c!==d||c&&'object'==typeof c||'function'==typeof c}function o(a,b,c,d,e){for(var f in b)if(c[f]){var g=d[f],h=e[f],j=b[f];if(j)for(var k,l=0;l<j.length;l+=1)k=j[l],k.__calling||(k.__calling=!0,k.call(a,g,h),k.__calling=!1)}}function p(a,b){a.options=b,a._observers={pre:l(),post:l()},a._handlers=l(),a._root=b._root||a,a._yield=b._yield,a._bind=b._bind}function q(a){for(;a&&a.length;)a.pop()()}function r(a,b){return 2===b?0==a%4?29:28:[31,-1,31,30,31,30,31,31,30,31,30,31][b-1]}function s(a,b){return 1===b?{month:12,year:a-1}:{month:b-1,year:a}}function t(a,b){return 12===b?{month:1,year:a+1}:{month:b+1,year:a}}function u(a,b,c){if(1===c){const c=s(a,b),d=r(c.year,c.month),e=new Date(Date.UTC(c.year,c.month-1,d));return{dayInMonth:e.getUTCDate(),dayInWeek:e.getUTCDay(),month:c}}const d=new Date(Date.UTC(a,b-1,c-1));return{dayInMonth:d.getUTCDate(),dayInWeek:d.getUTCDay(),month:{month:b,year:a}}}function v(a,b,c){if(((a,b,c)=>r(a,b)===c)(a,b,c)){const c=t(a,b),d=new Date(Date.UTC(c.year,c.month-1,1));return{dayInMonth:d.getUTCDate(),dayInWeek:d.getUTCDay(),month:c}}const d=new Date(Date.UTC(a,b-1,c+1));return{dayInMonth:d.getUTCDate(),dayInWeek:d.getUTCDay(),month:{month:b,year:a}}}function w(a,b,c=0){if(a=parseInt(a,10),b=parseInt(b,10),c=parseInt(c,10),!a||isNaN(a)||1900>a||2100<a)throw Error('Wrong year. Please use number from 1900 to 2100');if(!b||isNaN(b)||1>b||12<b)throw Error('Wrong month. Please use number from 1 to 12');if(!c&&0!==c||isNaN(c)||0>c||6<c)throw Error('Wrong start of the week. Please use number from 0 (for Sunday) to 6 (for Saturday)');const d=new Date(Date.UTC(a,b-1,1));let e={dayInMonth:d.getUTCDate(),dayInWeek:d.getUTCDay(),month:{month:b,year:a}};if(e.dayInWeek!==c){let a=u(e.month.year,e.month.month,e.dayInMonth);for(;a.dayInWeek!==c;)a=u(a.month.year,a.month.month,a.dayInMonth);e=a}const f=7,g=[];for(let d=e;g.length<f*6;)g.push(d),d=v(d.month.year,d.month.month,d.dayInMonth);return[g.slice(0*f,1*f),g.slice(1*f,2*f),g.slice(2*f,3*f),g.slice(3*f,4*f),g.slice(4*f,5*f),g.slice(5*f,6*f)]}function x(a,b){return t(a,b)}function y(a,b,c){return w(a,b,c)}function z(a,b,c){const d=t(a,b);return w(d.year,d.month,c)}function A(a,b){return U(a,b)}function B(a,b){const c=t(a,b);return U(c.year,c.month)}function C(a){return V(a)}function D(){return{hoverDay:null}}function E(a){k(a,'svelte-3899300490','')}function F(a,b){function k(a){b.get();b.keydown(a)}function l(){var a=b.get();b.back(a.year,a.month)}function m(){var a=b.get();b.forward(a.year,a.month)}var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,F,I,L,M,N,O,P,Q,R=a.nextMonth.year;window.addEventListener('keydown',k);for(var S=a.dayNames,T=[],U=0;U<S.length;U+=1)T[U]=G(a,S,S[U],U,b);for(var V=a.calendarMonth,W=[],U=0;U<V.length;U+=1)W[U]=H(a,V,V[U],U,b);for(var X=a.dayNames,Y=[],U=0;U<X.length;U+=1)Y[U]=J(a,X,X[U],U,b);for(var Z=a.nextCalendarMonth,$=[],U=0;U<Z.length;U+=1)$[U]=K(a,Z,Z[U],U,b);return{c:function(){n=h('\n\n'),o=g('div'),p=g('div'),q=g('button'),q.innerHTML='<svg viewBox="0 0 1000 1000"><path d="M336.2 274.5l-210.1 210h805.4c13 0 23 10 23 23s-10 23-23 23H126.1l210.1 210.1c11 11 11 21 0 32-5 5-10 7-16 7s-11-2-16-7l-249.1-249c-11-11-11-21 0-32l249.1-249.1c21-21.1 53 10.9 32 32z"></path>\n      </svg>',r=h('\n    '),s=g('button'),s.innerHTML='<svg viewBox="0 0 1000 1000"><path d="M694.4 242.4l249.1 249.1c11 11 11 21 0 32L694.4 772.7c-5 5-10 7-16 7s-11-2-16-7c-11-11-11-21 0-32l210.1-210.1H67.1c-13 0-23-10-23-23s10-23 23-23h805.4L662.4 274.5c-21-21.1 11-53.1 32-32.1z"></path>\n      </svg>',t=h('\n\n  '),u=g('div'),v=g('table'),w=g('caption'),x=h(a.monthName),y=h(' '),z=h(a.year),A=h('\n      '),B=g('tr');for(var b=0;b<T.length;b+=1)T[b].c();C=h('\n      ');for(var b=0;b<W.length;b+=1)W[b].c();D=h('\n\n    '),F=g('table'),I=g('caption'),L=h(a.nextMonthName),M=h(' '),N=h(R),O=h('\n      '),P=g('tr');for(var b=0;b<Y.length;b+=1)Y[b].c();Q=h('\n      ');for(var b=0;b<$.length;b+=1)$[b].c();this.h()},h:function(){E(o),o.className='wrapper',p.className='flex between',q.className='pointer reset-button',i(q,'click',l),s.className='pointer reset-button',i(s,'click',m),u.className='flex',v.className='weeks',B.className='header',F.className='weeks weeks-next-month',P.className='header'},m:function(a,b){d(n,a,b),d(o,a,b),c(p,o),c(q,p),c(r,p),c(s,p),c(t,o),c(u,o),c(v,u),c(w,v),c(x,w),c(y,w),c(z,w),c(A,v),c(B,v);for(var e=0;e<T.length;e+=1)T[e].m(B,null);c(C,v);for(var e=0;e<W.length;e+=1)W[e].m(v,null);c(D,u),c(F,u),c(I,F),c(L,I),c(M,I),c(N,I),c(O,F),c(P,F);for(var e=0;e<Y.length;e+=1)Y[e].m(P,null);c(Q,F);for(var e=0;e<$.length;e+=1)$[e].m(F,null)},p:function(a,c){a.monthName&&(x.data=c.monthName),a.year&&(z.data=c.year);var d=c.dayNames;if(a.dayNames){for(var e=0;e<d.length;e+=1)T[e]?T[e].p(a,c,d,d[e],e):(T[e]=G(c,d,d[e],e,b),T[e].c(),T[e].m(B,null));for(;e<T.length;e+=1)T[e].u(),T[e].d();T.length=d.length}var f=c.calendarMonth;if(a.calendarMonth||a.rangeStartDay||a.rangeEndDay||a.month||a.hoverDay){for(var e=0;e<f.length;e+=1)W[e]?W[e].p(a,c,f,f[e],e):(W[e]=H(c,f,f[e],e,b),W[e].c(),W[e].m(v,null));for(;e<W.length;e+=1)W[e].u(),W[e].d();W.length=f.length}a.nextMonthName&&(L.data=c.nextMonthName),a.nextMonth&&R!==(R=c.nextMonth.year)&&(N.data=R);var g=c.dayNames;if(a.dayNames){for(var e=0;e<g.length;e+=1)Y[e]?Y[e].p(a,c,g,g[e],e):(Y[e]=J(c,g,g[e],e,b),Y[e].c(),Y[e].m(P,null));for(;e<Y.length;e+=1)Y[e].u(),Y[e].d();Y.length=g.length}var h=c.nextCalendarMonth;if(a.nextCalendarMonth||a.rangeStartDay||a.rangeEndDay||a.nextMonth||a.hoverDay){for(var e=0;e<h.length;e+=1)$[e]?$[e].p(a,c,h,h[e],e):($[e]=K(c,h,h[e],e,b),$[e].c(),$[e].m(F,null));for(;e<$.length;e+=1)$[e].u(),$[e].d();$.length=h.length}},u:function(){e(n),e(o);for(var a=0;a<T.length;a+=1)T[a].u();for(var a=0;a<W.length;a+=1)W[a].u();for(var a=0;a<Y.length;a+=1)Y[a].u();for(var a=0;a<$.length;a+=1)$[a].u()},d:function(){window.removeEventListener('keydown',k),j(q,'click',l),j(s,'click',m),f(T),f(W),f(Y),f($)}}}function G(b,f,i){var j,k,l=i;return{c:function(){j=g('th'),k=h(l),this.h()},h:function(){j.className='day-name'},m:function(a,b){d(j,a,b),c(k,j)},p:function(a,b,c,d){a.dayNames&&l!==(l=d)&&(k.data=l)},u:function(){e(j)},d:a}}function H(a,b,c,h,j){for(var k,l=c,m=[],n=0;n<l.length;n+=1)m[n]=I(a,b,c,h,l,l[n],n,j);return{c:function(){k=g('tr');for(var a=0;a<m.length;a+=1)m[a].c();this.h()},h:function(){k.className='week'},m:function(a,b){d(k,a,b);for(var c=0;c<m.length;c+=1)m[c].m(k,null)},p:function(a,b,c,d,e){var f=d;if(a.calendarMonth||a.rangeStartDay||a.rangeEndDay||a.month||a.hoverDay){for(var g=0;g<f.length;g+=1)m[g]?m[g].p(a,b,c,d,e,f,f[g],g):(m[g]=I(b,c,d,e,f,f[g],g,j),m[g].c(),m[g].m(k,null));for(;g<m.length;g+=1)m[g].u(),m[g].d();m.length=f.length}},u:function(){e(k);for(var a=0;a<m.length;a+=1)m[a].u()},d:function(){f(m)}}}function I(a,b,f,k,l,m,n,o){var p,q,r,s=m.dayInMonth;return{c:function(){p=g('td'),r=h(s),this.h()},h:function(){p.className=q=W(m,a.month,a.hoverDay,a.rangeStartDay,a.rangeEndDay),i(p,'click',M),i(p,'mouseover',N),p._svelte={component:o,week_1:l,weekDay_index:n}},m:function(a,b){d(p,a,b),c(r,p)},p:function(a,b,c,d,e,f,g,h){(a.calendarMonth||a.month||a.hoverDay||a.rangeStartDay||a.rangeEndDay)&&q!==(q=W(g,b.month,b.hoverDay,b.rangeStartDay,b.rangeEndDay))&&(p.className=q),p._svelte.week_1=f,p._svelte.weekDay_index=h,a.calendarMonth&&s!==(s=g.dayInMonth)&&(r.data=s)},u:function(){e(p)},d:function(){j(p,'click',M),j(p,'mouseover',N)}}}function J(b,f,i){var j,k,l=i;return{c:function(){j=g('th'),k=h(l),this.h()},h:function(){j.className='day-name'},m:function(a,b){d(j,a,b),c(k,j)},p:function(a,b,c,d){a.dayNames&&l!==(l=d)&&(k.data=l)},u:function(){e(j)},d:a}}function K(a,b,c,h,j){for(var k,l=c,m=[],n=0;n<l.length;n+=1)m[n]=L(a,b,c,h,l,l[n],n,j);return{c:function(){k=g('tr');for(var a=0;a<m.length;a+=1)m[a].c();this.h()},h:function(){k.className='week'},m:function(a,b){d(k,a,b);for(var c=0;c<m.length;c+=1)m[c].m(k,null)},p:function(a,b,c,d,e){var f=d;if(a.nextCalendarMonth||a.rangeStartDay||a.rangeEndDay||a.nextMonth||a.hoverDay){for(var g=0;g<f.length;g+=1)m[g]?m[g].p(a,b,c,d,e,f,f[g],g):(m[g]=L(b,c,d,e,f,f[g],g,j),m[g].c(),m[g].m(k,null));for(;g<m.length;g+=1)m[g].u(),m[g].d();m.length=f.length}},u:function(){e(k);for(var a=0;a<m.length;a+=1)m[a].u()},d:function(){f(m)}}}function L(a,b,f,k,l,m,n,o){var p,q,r,s=m.dayInMonth;return{c:function(){p=g('td'),r=h(s),this.h()},h:function(){p.className=q=W(m,a.nextMonth.month,a.hoverDay,a.rangeStartDay,a.rangeEndDay),i(p,'click',O),i(p,'mouseover',P),p._svelte={component:o,week_2:l,weekDay_index:n}},m:function(a,b){d(p,a,b),c(r,p)},p:function(a,b,c,d,e,f,g,h){(a.nextCalendarMonth||a.nextMonth||a.hoverDay||a.rangeStartDay||a.rangeEndDay)&&q!==(q=W(g,b.nextMonth.month,b.hoverDay,b.rangeStartDay,b.rangeEndDay))&&(p.className=q),p._svelte.week_2=f,p._svelte.weekDay_index=h,a.nextCalendarMonth&&s!==(s=g.dayInMonth)&&(r.data=s)},u:function(){e(p)},d:function(){j(p,'click',O),j(p,'mouseover',P)}}}function M(){var a=this._svelte.component,b=this._svelte.week_1,c=this._svelte.weekDay_index,d=b[c];a.selectDay(d)}function N(){var a=this._svelte.component,b=a.get(),c=this._svelte.week_1,d=this._svelte.weekDay_index,e=c[d];a.setHoverDay(b.rangeStartDay,b.rangeEndDay,e)}function O(){var a=this._svelte.component,b=this._svelte.week_2,c=this._svelte.weekDay_index,d=b[c];a.selectDay(d)}function P(){var a=this._svelte.component,b=a.get(),c=this._svelte.week_2,d=this._svelte.weekDay_index,e=c[d];a.setHoverDay(b.rangeStartDay,b.rangeEndDay,e)}function Q(a){p(this,a),this._state=b(D(),a.data),this._recompute({year:1,month:1,startOfTheWeek:1,range:1},this._state),this._fragment=F(this._state,this),a.target&&(this._fragment.c(),this._fragment.m(a.target,a.anchor||null))}const R=(a,b)=>a.month.month===b,S=(a)=>6===a.dayInWeek||0===a.dayInWeek,T=(a,{day:b,year:c,month:d})=>b===a.dayInMonth&&d===a.month.month&&c===a.month.year,U=(a,b)=>new Date(a,b-1).toLocaleString('en-US',{month:'long'}),V=(a)=>{const b=['Su','Mo','Tu','We','Th','Fr','Sa'];for(let c=6;c>6-a;c--){const a=b.shift();a&&b.push(a)}return b},W=(a,b,c,d,e)=>{const f=['day'];if(S(a)&&f.push('weekend'),f.push(R(a,b)?'current-month':'other-month'),d&&((T(a,d)||e&&T(a,e))&&f.push('selected'),c||e)){const b=Date.UTC(a.month.year,a.month.month-1,a.dayInMonth),g=Date.UTC(d.year,d.month-1,d.day),h=e?Date.UTC(e.year,e.month-1,e.day):Date.UTC(c.month.year,c.month.month-1,c.dayInMonth);g&&h&&(b>=g&&b<=h||b<=g&&b>=h)&&f.push('in-range')}return f.join(' ')},X=(a,b)=>{const{month:c,dayInMonth:d}=b;if(!a.get('rangeStartDay'))a.set({rangeStartDay:{day:d,month:c.month,year:c.year}});else if(!a.get('rangeEndDay')){a.set({hoverDay:void 0,rangeEndDay:{day:d,month:c.month,year:c.year}});const b=a.get('rangeStartDay'),e={day:b.day,month:b.month,year:b.year},f={day:d,month:c.month,year:c.year},g=Date.UTC(e.year,e.month-1,e.day),h=Date.UTC(f.year,f.month-1,f.day);g<h?a.fire('selectedRange',{end:f,start:e}):a.fire('selectedRange',{end:e,start:f})}else a.get('rangeStartDay')&&a.get('rangeEndDay')&&a.set({rangeEndDay:void 0,rangeStartDay:{day:d,month:c.month,year:c.year}})},Y=(a)=>{for(let b of a)b.style.borderSpacing='0px'===b.style.borderSpacing?'':'0px'};var Z={selectDay(a,b){X(this,a,b)},back(a,b){this.set(s(a,b)),Y(this.options.target.getElementsByClassName('weeks'))},forward(a,b){this.set(t(a,b)),Y(this.options.target.getElementsByClassName('weeks'))},setHoverDay(a,b,c){a&&!b&&this.set({hoverDay:c})},keydown(a){'Escape'===a.key&&this.set({rangeStartDay:void 0,rangeEndDay:void 0,hoverDay:void 0})}};return b(Q.prototype,Z,{destroy:m,get:function(a){return a?this._state[a]:this._state},fire:function(a,b){var c=a in this._handlers&&this._handlers[a].slice();if(c)for(var d=0;d<c.length;d+=1)c[d].call(this,b)},observe:function(a,b,c){var d=c&&c.defer?this._observers.post:this._observers.pre;return(d[a]||(d[a]=[])).push(b),c&&!1===c.init||(b.__calling=!0,b.call(this,this._state[a]),b.__calling=!1),{cancel:function(){var c=d[a].indexOf(b);~c&&d[a].splice(c,1)}}},on:function(a,b){if('teardown'===a)return this.on('destroy',b);var c=this._handlers[a]||(this._handlers[a]=[]);return c.push(b),{cancel:function(){var a=c.indexOf(b);~a&&c.splice(a,1)}}},set:function(a){this._set(b({},a)),this._root._lock||(this._root._lock=!0,q(this._root._beforecreate),q(this._root._oncreate),q(this._root._aftercreate),this._root._lock=!1)},teardown:m,_recompute:a,_set:function(a){var c=this._state,d={},e=!1;for(var f in a)n(a[f],c[f])&&(d[f]=e=!0);e&&(this._state=b({},c,a),this._recompute(d,this._state),this._bind&&this._bind(d,this._state),o(this,this._observers.pre,d,this._state,c),this._fragment.p(d,this._state),o(this,this._observers.post,d,this._state,c))},_mount:function(a,b){this._fragment.m(a,b)},_unmount:function(){this._fragment.u()}}),Q.prototype._recompute=function(a,b){(a.year||a.month)&&n(b.nextMonth,b.nextMonth=x(b.year,b.month))&&(a.nextMonth=!0),(a.year||a.month||a.startOfTheWeek||a.range)&&(n(b.calendarMonth,b.calendarMonth=y(b.year,b.month,b.startOfTheWeek,b.range))&&(a.calendarMonth=!0),n(b.nextCalendarMonth,b.nextCalendarMonth=z(b.year,b.month,b.startOfTheWeek,b.range))&&(a.nextCalendarMonth=!0)),(a.year||a.month)&&(n(b.monthName,b.monthName=A(b.year,b.month))&&(a.monthName=!0),n(b.nextMonthName,b.nextMonthName=B(b.year,b.month))&&(a.nextMonthName=!0)),a.startOfTheWeek&&n(b.dayNames,b.dayNames=C(b.startOfTheWeek))&&(a.dayNames=!0)},Q}();
//# sourceMappingURL=range_picker-nomodule.js.map
